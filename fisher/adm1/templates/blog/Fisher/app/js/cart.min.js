$(function(){function e(){$.ajax({type:"POST",url:"ajax/recalculation-cart-table.php",success:function(t){$(".record .wrapp").html(t)}})}$(".input_wrapp .button_wrapp button").click(function(t){t.preventDefault();var a=$(this).parents(".input_wrapp").children("input").val(),p=$(this).parents("tr").children(".td_products").children(".item-cart").attr("data-id");a?(a=+a,$(this).hasClass("plus")?a++:$(this).hasClass("minus")&&1<a&&a--):a=1,$.ajax({type:"POST",url:"ajax/cart-show.php",data:{id_item:p,count:a},success:function(t){$('.item-cart[data-id="'+p+'"]').parents("tr").find(".total-price").children("span.value").html(t),$('.item-cart[data-id="'+p+'"]').parents("tr").find(".input_wrapp").children("input").attr("value",a),e()}})}),$('.input_wrapp input[type="number"]').change(function(t){t.preventDefault();var a=$(this).parents(".input_wrapp").children("input").val(),p=$(this).parents("tr").children(".td_products").children(".item-cart").attr("data-id");0!=a&&0<=a&&$.ajax({type:"POST",url:"ajax/cart-show.php",data:{id_item:p,count:a},success:function(t){$('.item-cart[data-id="'+p+'"]').parents("tr").find(".total-price").children("span.value").html(t),$('.item-cart[data-id="'+p+'"]').parents("tr").find(".input_wrapp").children("input").attr("value",a),e()}})}),$(".delete button").click(function(t){t.preventDefault();var a=$(this).attr("data-id");$.ajax({type:"POST",url:"ajax/cart-show.php",data:{id_item:a,type:$(this).attr("data-type"),delete:!0},success:function(){1==$('.item-cart[data-id="'+a+'"]').parents("tbody").children().length?$('.item-cart[data-id="'+a+'"]').parents(".container").remove():$('.item-cart[data-id="'+a+'"]').parents("tr").remove(),e()}})}),$(".popup-with-form").magnificPopup({type:"inline",focus:"#form-popup"}),$(".mail-to").click(function(t){t.preventDefault(),$.ajax({type:"POST",url:"ajax/mail.php",data:{phone:$("#form-popup input#phone").val(),email:$("#form-popup input#email").val(),msg:$("#form-popup textarea#mg").val()},success:function(t){$("#form-popup form").html(t)}})})});